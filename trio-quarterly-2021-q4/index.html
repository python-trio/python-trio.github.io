<!doctype html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=en-gb lang=en-gb><head><link href=https://gmpg.org/xfn/11 rel=profile><meta charset=utf-8><meta name=generator content="Hugo 0.85.0"><meta name=viewport content="width=device-width,initial-scale=1"><title>Trio Quarterly - 2021/10 -> 2021/12 &#183; Trio</title><meta name=description content><link type=text/css rel=stylesheet href=https://python-trio.github.io/css/print.css media=print><link type=text/css rel=stylesheet href=https://python-trio.github.io/css/poole.css><link type=text/css rel=stylesheet href=https://python-trio.github.io/css/syntax.css><link type=text/css rel=stylesheet href=https://python-trio.github.io/css/hyde.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Abril+Fatface|PT+Sans:400,400i,700"><link rel=apple-touch-icon-precomposed sizes=144x144 href=/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=/favicon.png></head><body><aside class=sidebar><div class="container sidebar-sticky"><div class=sidebar-about><a href=https://python-trio.github.io/><h1>Trio</h1></a><p class=lead>A friendly Python library for async concurrency and I/O</p></div><nav><ul class=sidebar-nav><li><a href=https://python-trio.github.io/>Home</a></li><li><a href=https://trio.readthedocs.io/en/latest/>Docs</a></li><li><a href=https://github.com/python-trio/trio>GitHub</a></li></ul></nav><p>All content licenced under CC-BY 4.0 unless otherwise indicated.</p></div></aside><main class="content container"><div class=post><h1>Trio Quarterly - 2021/10 -> 2021/12</h1><time datetime=2021-12-31T00:00:00Z class=post-date>Fri, Dec 31, 2021</time><p>This is the Q4 2021 edition of the Trio Quarterly newsletter, replacing the old Monthly one as a
quarterly schedule is a better fit for the project.</p><p>If you wish to get your library featured in a Trio Monthly post, please contact me on Matrix
(<code>@lura:veriny.tf</code>), or ping me in the Gitter (same username). Any Trio-related project is welcome!</p><h2 id=trio-library>Trio Library</h2><h3 id=openssl-30-support>OpenSSL 3.0 support</h3><p>The unforgiving passage of linear time comes for us all, including OpenSSL. OpenSSL version 3.0
was released recently, alongside support for it in Python 3.10. Unfortunately, Trio did not support
it properly due to internal error handling issues. This has been fixed with
<a href=https://github.com/python-trio/trio/pull/2203>PR #2203</a>, so now you can enjoy Trio applications
on newer OpenSSL versions.</p><h2 id=external-libraries>External Libraries</h2><h3 id=trio-parallel>trio-parallel</h3><p>The <a href=https://github.com/richardsheridan/trio-parallel>trio-parallel</a> project had a new release this
quarter, exiting alpha.</p><blockquote><p>trio-parallel, the simple library for CPU-parallelism in Trio, released a 1.0.0 version to PyPI, including bugfixes, revamped documentation, and a finalized WorkerContext API. Check it out at trio-parallel.readthedocs.io !</p></blockquote><h3 id=tractor>Tractor</h3><p>The <a href=https://github.com/goodboy/tractor>Tractor</a> project had two new releases this quarter:</p><p>Alpha3:</p><blockquote><p><code>tractor</code> saw its 4th alpha release with some interesting improvements in the core cross-actor cancellation mechanics as well as the start of a public expose of what were our internal <code>trio</code> helper API goodies and we officially now have optional <code>msgspec</code> support!</p><p>The quick feature summary:</p><ul><li><p>We switched to making windows use the <code>trio</code>/<code>subprocess</code> spawner by default which means windows users now get multi-core debugger support out of the box.</p><p>Support for optional <a href=https://github.com/jcrist/msgspec><code>msgspec</code></a> lib usage for those who want a faster and typed codec alternative to <a href=https://github.com/msgpack/msgpack-python><code>msgpack-python</code></a>.</p></li><li><p>We exposed a new sub-package <code>tractor.trionics</code> which is where we&rsquo;ll be stashing all our &ldquo;higher level&rdquo; <code>trio</code> related helper APIs going forward. For example checkout our new <a href="https://github.com/goodboy/tractor/blob/master/tractor/trionics/_mngrs.py?rgh-link-date=2021-11-01T18%3A13%3A56Z#L39"><code>gather_contexts</code></a> concurrent context manager enter-er (kinda like a concurrent version of <code>asyncio.gather()</code> but for context manager instances).</p></li><li><p>Dropped Py 3.8 support as we decided to roll with a new model of supporting only the latest 2 major releases which means we also now support 3.10.</p></li><li><p>Change the core message loop to handle task and actor-runtime cancel
requests <strong>immediately</strong> instead of scheduling them as is done for rpc-task
requests. Previously cancel requests were actually <em>scheduled</em> as rpc requests but this has changed to instead invoke a synchronous style cancellation which resulted in a massive reduction in teardown race conditions particularly in our anti-zombie-process machinery and it&rsquo;s interaction with the debugger system.</p></li></ul></blockquote><p>Alpha4:</p><blockquote><p>This <em>quarter</em> in <code>tractor</code> we had our 4th alpha release with some super hip features landing as well as a ton of internal runtime improvements with the end result of a much more deterministic inter-actor cancellation system as well as better defined cross-actor task <em>context</em> semantics.</p><p>The slew of details is in <a href="https://github.com/goodboy/tractor/blob/master/NEWS.rst?rgh-link-date=2021-12-17T17%3A46%3A31Z">our changelog</a> but just in case you wanted the TL;DR:</p><ul><li><p>We re-licensed the code base under AGPLv3 going foward (solely to close the SaaS loophole in the old license).</p></li><li><p>Added a new &ldquo;infetced <code>asyncio</code> mode&rdquo; which let&rsquo;s you spawn actors which run the <code>asyncio</code> event loop, start <code>trio</code> in <a href="https://trio.readthedocs.io/en/stable/reference-lowlevel.html?highlight=guest%20mode#what-is-guest-mode">guest-mode</a> on the loop, then accept RPC requests from peer actors to drive <code>asyncio</code> tasks in a SC-per-task oriented way.</p></li><li><p>Support for <em>error relay</em> across <code>tractor.Context</code> inter-actor linked tasks meaning if a task errors in one actor the error is raised (inside an appropriate boxed exception) to the other side&rsquo;s cancel scope. This was part of ensuring if a stream is opened only on one side of a bi-directional stream then a new <code>StreamOverrun</code> error will be raised on the sending side to avoid unexpected backpressure hangs.</p></li><li><p>A new <code>trionics.maybe_open_context()</code> an actor-scoped async multi-task
context manager resource caching API.</p></li><li><p>Deterministic handling of <em>actor cancel requests</em> which are implemented currently as special RPC calls (instead of built into our messaging protocol) such that <code>Portal.cancel_actor()</code> won&rsquo;t not just be abandoned without waiting to see if it was successful joy</p></li><li><p>Support <code>debug_mode: bool</code> on a per-actor basis.</p></li><li><p>A bunch of bug fixes that fell out as part of landing all these features including better KBI handling in contexts, better graceful daemon-actor cancellation, fixes to the broadcast channel <code>trionics</code> implementation to correctly terminate on underlying stream closure.</p></li></ul></blockquote></div></main></body></html>