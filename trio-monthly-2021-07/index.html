<!doctype html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=en-gb lang=en-gb><head><link href=https://gmpg.org/xfn/11 rel=profile><meta charset=utf-8><meta name=generator content="Hugo 0.85.0"><meta name=viewport content="width=device-width,initial-scale=1"><title>Trio Monthly - 2021/07 &#183; Trio</title><meta name=description content><link type=text/css rel=stylesheet href=https://python-trio.github.io/css/print.css media=print><link type=text/css rel=stylesheet href=https://python-trio.github.io/css/poole.css><link type=text/css rel=stylesheet href=https://python-trio.github.io/css/syntax.css><link type=text/css rel=stylesheet href=https://python-trio.github.io/css/hyde.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Abril+Fatface|PT+Sans:400,400i,700"><link rel=apple-touch-icon-precomposed sizes=144x144 href=/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=/favicon.png></head><body><aside class=sidebar><div class="container sidebar-sticky"><div class=sidebar-about><a href=https://python-trio.github.io/><h1>Trio</h1></a><p class=lead>A friendly Python library for async concurrency and I/O</p></div><nav><ul class=sidebar-nav><li><a href=https://python-trio.github.io/>Home</a></li><li><a href=https://trio.readthedocs.io/en/latest/>Docs</a></li><li><a href=https://github.com/python-trio/trio>GitHub</a></li></ul></nav><p>All content licenced under CC-BY 4.0 unless otherwise indicated.</p></div></aside><main class="content container"><div class=post><h1>Trio Monthly - 2021/07</h1><time datetime=2021-08-01T00:00:00Z class=post-date>Sun, Aug 1, 2021</time><p>Welcome to the July 2021 edition of Trio Monthly. This is a monthly blog post dedicated to
highlighting what&rsquo;s going on in the Trio world, from developments in the core library to
developments in new and existing libraries and application powered by Trio.</p><p>If you wish to get your library featured in a Trio Monthly post, please contact the author on Matrix
(<code>@lura:veriny.tf</code>).</p><h2 id=trio-library>Trio Library</h2><h3 id=cyclic-garbage-fixes>Cyclic Garbage Fixes</h3><p>Trio had another source of cyclic garbage eliminated this month, in
<a href=https://github.com/python-trio/trio/pull/2063>PR #2063</a>.</p><blockquote><p>Trio now avoids creating cyclic garbage when a <code>MultiError</code> is generated and filtered,
including invisibly within the cancellation system. This means errors raised
through nurseries and cancel scopes should result in less GC latency.</p></blockquote><p>Trio has to do low-level things when it comes to frames, tracebacks, and exceptions, which sometimes
results in cyclic references being left around. These aren&rsquo;t picked up by the regular Python
reference count garbage collector, but by the cyclic detector instead, causing potential GC pressure
and application slowdowns. Eliminating these cycles allows the objects to be freed much sooner,
improving the speed and memory usage of all Trio applications.</p><h2 id=external-libraries>External Libraries</h2><p>We have two libraries to feature this month.</p><h3 id=trio-parallel>trio-parallel</h3><p>The first of this is the <code>trio-parallel</code> library. As the author puts it:</p><blockquote><p><code>trio-parallel</code> is a simple CPU-parallelism library for Trio. This month, an advanced subprocess
worker customization API, the <code>cache_scope</code> context manager, was merged, allowing choice of
initialization, timeout, and retirement policies, as well as defining a scoped lifetime for an
isolated, local worker cache. This feature has been pre-released in version 1.0.0a0 available on
PyPI for wider testing for a final 1.0 release later this year. Please see
<a href=https://trio-parallel.rtfd.io/en/1.0.0a0/>https://trio-parallel.rtfd.io/en/1.0.0a0/</a> for details.</p></blockquote><h3 id=tractor>Tractor</h3><p>The second library featured is the Tractor library. As the author puts it:</p><blockquote><p>For those who haven&rsquo;t heard of us, <code>tractor</code> is a multi-processing-runtime library which applies
structured concurrency from the ground up on process managment and IPC. We had our first alpha
release this past Feb. and now our second this Aug. 1st ü•≥.</p></blockquote><blockquote><p>The quick and dirty summary for this release is:</p><ul><li>Updated our unidirectional streaming APIs to be more <code>async_generator.aclosing()</code>-like</li><li>Vastly improved our actor reaping during cancellation and error propagation for the
<code>multiprocessing</code> spawner backend</li><li>Added a next-gen, fully bi-directional streaming API with complete, transitive SC semantics
for IPC üèÑüèº‚Äç‚ôÄÔ∏è</li><li>Hardened our multi-process debugger support (ala <code>pdb++</code>) to prevent root process clobbers of
children who have acquired the repl tty lock; this is thanks to our new <code>tractor.Context</code>
cross-actor-task syncing protocol.</li><li>Started some tinkering with <code>msgspec</code> for an optional alternative to <code>msgpack-python</code>.</li><li>Improved our infected-<code>asyncio</code>-in-guest-mode cross-loop streaming semantics by simplifying to
memory channel only style data passing between frameworks.</li><li>Added a ton of new examples to both the readme and repository script set.</li><li>Removed both <code>tractor.run()</code> and support for invoking sync functions; instead we recommend users
try <code>trio-parallel</code>!</li></ul><p>For more details see our <a href=https://github.com/goodboy/tractor/blob/master/NEWS.rst>new release</a>.</p></blockquote></div></main></body></html>